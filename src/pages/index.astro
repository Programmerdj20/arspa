---
import Layout from '../layouts/Layout.astro';
import BookingModal from '../components/BookingModal.astro';
import '../styles/global.css';
---

<Layout title="ARspa - Estética y Bienestar | Medellín" description="Spa especializado en estética y bienestar en Medellín. Masajes, tratamientos corporales, faciales, sueroterapia. Atención profesional con base científica.">
	<!-- Hero Section -->
	<section id="inicio" class="relative min-h-screen overflow-hidden" style="background-color: var(--color-bg-main);">
		<!-- Hero Background Carousel -->
		<div class="absolute inset-0">
			<div class="absolute inset-0 bg-gradient-to-r from-black/60 to-transparent z-10"></div>
			<div class="hero-carousel">
				<img
					src="/images/Banner_hero.webp"
					alt="ARspa ambiente relajante con mesa de masaje y velas"
					class="carousel-image"
				>
				<img
					src="/images/Banner_hero_2.webp"
					alt="ARspa espacio sereno de relajación y bienestar"
					class="carousel-image"
				>
			</div>
		</div>

		<div class="relative z-20 section-padding py-20">
			<div class="hero-grid">
				<!-- Hero Content -->
				<div class="hero-content">
					<div class="space-y-8">
						<div class="space-y-6">
							<!-- Logo y Titulo -->
							<div class="space-y-4">
								<h2 class="text-5xl md:text-7xl font-bold font-primary leading-tight text-primary">
									Tu belleza,
									<span class="text-gold-light">tu espacio.</span>
								</h2>

								<p class="text-xl text-secondary leading-relaxed max-w-xl">
									En ARspa convertimos tu espacio en autocuidado: tratamientos diseñados para cuidar tu salud, mejorar tu estética y devolverte bienestar.
								</p>
							</div>

							<!-- CTA Buttons -->
							<div class="flex flex-col sm:flex-row gap-4 max-w-lg">
								<a href="/servicios" class="bg-luxury px-8 py-4 font-semibold rounded-full hover:opacity-90 transition-all text-center flex items-center justify-center" style="color: var(--color-bg-main);">
									<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
										<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
									</svg>
									Ver Servicios
								</a>
								<a href="/servicios" class="border-gold-light text-gold-light px-8 py-4 border-2 font-semibold rounded-full hover:bg-opacity-10 transition-all text-center flex items-center justify-center" onmouseover="this.style.background='var(--gradient-luxury)'; this.style.color='var(--color-bg-main)'" onmouseout="this.style.background='transparent'; this.style.color='var(--color-gold-light)'">
									<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
										<path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm0 2h12v8H4V6z" clip-rule="evenodd"/>
										<path fill-rule="evenodd" d="M4 8a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1z" clip-rule="evenodd"/>
									</svg>
									Ver Planes
								</a>
							</div>
						</div>
					</div>
				</div>

				<!-- Appointment Form -->
				<div class="backdrop-blur-xl rounded-2xl p-6 shadow-xl max-w-sm ml-auto hero-form" style="background: linear-gradient(135deg, rgba(26,26,26,0.8), rgba(26,26,26,0.6)); backdrop-filter: blur(20px); border: 1px solid var(--color-border);">
					<div class="text-center mb-5">
						<div class="w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center bg-luxury">
							<svg class="w-6 h-6" style="color: var(--color-bg-main);" fill="currentColor" viewBox="0 0 20 20">
								<path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
							</svg>
						</div>
						<h3 class="text-xl font-semibold text-primary mb-1 font-primary">Reserva tu Cita</h3>
						<p class="text-gold-light text-sm font-primary">Agenda fácilmente vía WhatsApp</p>
					</div>

					<form id="appointment-form" class="space-y-3">
						<div class="space-y-3">
							<input
								type="text"
								id="nombre"
								placeholder="Tu nombre completo"
								required
								class="w-full px-3 py-2 backdrop-blur-sm rounded-lg text-primary focus:outline-none focus:ring-2 focus:border-transparent transition-all font-primary text-sm"
								style="background-color: rgba(237, 235, 231, 0.1); border: 1px solid var(--color-border); color: var(--color-text-primary);"
							>
							<input
								type="tel"
								id="telefono"
								placeholder="Tu número de teléfono"
								required
								class="w-full px-3 py-2 backdrop-blur-sm rounded-lg text-primary focus:outline-none focus:ring-2 focus:border-transparent transition-all font-primary text-sm"
								style="background-color: rgba(237, 235, 231, 0.1); border: 1px solid var(--color-border); color: var(--color-text-primary);"
							>
							<select
								id="servicio"
								required
								class="w-full px-3 py-2 backdrop-blur-sm rounded-lg text-primary focus:outline-none focus:ring-2 focus:border-transparent transition-all font-primary text-sm"
								style="background-color: rgba(237, 235, 231, 0.1); border: 1px solid var(--color-border); color: var(--color-text-primary);"
							>
								<option value="" style="color: var(--color-bg-main);">Selecciona un servicio</option>
								<option value="masajes" style="color: var(--color-bg-main);">Masajes de Relajación</option>
								<option value="corporales" style="color: var(--color-bg-main);">Tratamientos Corporales</option>
								<option value="faciales" style="color: var(--color-bg-main);">Faciales</option>
								<option value="sueroterapia" style="color: var(--color-bg-main);">Sueroterapia</option>
								<option value="dias-especiales" style="color: var(--color-bg-main);">Días Especiales</option>
							</select>
							<div class="grid grid-cols-2 gap-2">
								<input
									type="date"
									id="fecha"
									required
									class="w-full px-3 py-2 backdrop-blur-sm rounded-lg text-primary focus:outline-none focus:ring-2 focus:border-transparent transition-all font-primary text-sm"
									style="background-color: rgba(237, 235, 231, 0.1); border: 1px solid var(--color-border); color: var(--color-text-primary);"
								>
								<select
									id="modalidad"
									required
									class="w-full px-3 py-2 backdrop-blur-sm rounded-lg text-primary focus:outline-none focus:ring-2 focus:border-transparent transition-all font-primary text-sm"
									style="background-color: rgba(237, 235, 231, 0.1); border: 1px solid var(--color-border); color: var(--color-text-primary);"
								>
									<option value="" style="color: var(--color-bg-main);">Modalidad</option>
									<option value="spa" style="color: var(--color-bg-main);">En el Spa</option>
									<option value="domicilio" style="color: var(--color-bg-main);">A Domicilio (+Costo extra)</option>
								</select>
							</div>
							<textarea
								id="mensaje"
								rows="2"
								placeholder="Mensaje adicional (opcional)"
								class="w-full px-3 py-2 backdrop-blur-sm rounded-lg text-primary focus:outline-none focus:ring-2 focus:border-transparent resize-none transition-all font-primary text-sm"
								style="background-color: rgba(237, 235, 231, 0.1); border: 1px solid var(--color-border); color: var(--color-text-primary);"
							></textarea>
						</div>

						<button
							type="submit"
							class="w-full py-3 font-semibold rounded-lg transition-all duration-300 flex items-center justify-center hover:scale-[1.02] shadow-lg font-primary text-primary"
							style="background: linear-gradient(135deg, #25D366, #128C7E);"
						>
							<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
								<path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.787"/>
							</svg>
							Enviar vía WhatsApp
						</button>
					</form>
				</div>
			</div>
		</div>
	</section>

	<!-- How It Works Section -->
	<section id="como-funciona" class="py-20 bg-secondary">
		<div class="section-padding">
			<div class="text-center mb-16">
				<h2 class="text-4xl md:text-5xl font-bold text-primary mb-6">¿Cómo funciona?</h2>
				<p class="text-xl text-secondary max-w-3xl mx-auto">
					Nuestro proceso de atención está basado en la ciencia y la personalización,
					garantizando tu seguridad y satisfacción en cada paso.
				</p>
			</div>

			<!-- Fila 1: Pasos 1 y 2 -->
			<div class="relative max-w-3xl mx-auto mb-32">
				<div class="grid grid-cols-1 md:grid-cols-2 gap-8 how-it-works-row-1">
					<!-- Step 1 -->
					<div class="text-center group valoracion-step step-item" data-step="1">
						<div class="relative mb-6">
							<div class="absolute -top-4 -left-4 w-8 h-8 rounded-full flex items-center justify-center z-10 bg-accent" style="color: var(--color-bg-main);">
								<span class="text-lg font-bold">1</span>
							</div>
							<div class="w-40 h-40 rounded-full mx-auto shadow-gold group-hover:scale-110 transition-all duration-300 overflow-hidden border-gold-light bg-gold-light" style="border-width: 5px;">
								<img
									src="/images/Valoracion_1.webp"
									alt="Valoración profesional - paso 1"
									class="w-full h-full object-cover rounded-full"
								>
							</div>
						</div>
						<h3 class="text-xl font-bold mb-3 text-gold-light">Valoración</h3>
						<p class="text-primary mb-2 font-semibold">Nos centramos en el estado de salud y de piel del paciente</p>
						<p class="text-sm text-secondary">Análisis profesional para entender tus necesidades específicas</p>
					</div>

					<!-- Step 2 -->
					<div class="text-center group step-item" data-step="2">
						<div class="relative mb-6">
							<div class="absolute -top-4 -right-4 w-8 h-8 rounded-full flex items-center justify-center z-10 bg-accent" style="color: var(--color-bg-main);">
								<span class="text-lg font-bold">2</span>
							</div>
							<div class="w-40 h-40 rounded-full mx-auto shadow-gold group-hover:scale-110 transition-all duration-300 overflow-hidden border-gold-light bg-gold-light" style="border-width: 5px;">
								<img
									src="/images/Tratamiento_2.webp"
									alt="Tratamiento profesional - paso 2"
									class="w-full h-full object-cover rounded-full"
								>
							</div>
						</div>
						<h3 class="text-xl font-bold mb-3 text-gold-light">Tratamiento</h3>
						<p class="text-primary mb-2 font-semibold">Experiencia única adaptada a tus necesidades</p>
						<p class="text-sm text-secondary">Procedimientos personalizados con técnicas avanzadas</p>
					</div>
				</div>
			</div>

			<!-- Fila 2: Pasos 3 y 4 -->
			<div class="relative max-w-3xl mx-auto">
				<div class="grid grid-cols-1 md:grid-cols-2 gap-8 how-it-works-row-2">
					<!-- Step 3 -->
					<div class="text-center group step-item" data-step="3">
						<div class="relative mb-6">
							<div class="absolute -top-4 -left-4 w-8 h-8 rounded-full flex items-center justify-center z-10 bg-accent" style="color: var(--color-bg-main);">
								<span class="text-lg font-bold">3</span>
							</div>
							<div class="w-40 h-40 rounded-full mx-auto shadow-gold group-hover:scale-110 transition-all duration-300 overflow-hidden border-gold-light bg-gold-light" style="border-width: 5px;">
								<img
									src="/images/Acompanamiento_3.webp"
									alt="Acompañamiento profesional - paso 3"
									class="w-full h-full object-cover rounded-full"
								>
							</div>
						</div>
						<h3 class="text-xl font-bold mb-3 text-gold-light">Acompañamiento</h3>
						<p class="text-primary mb-2 font-semibold">Atención personalizada asegurando una experiencia cómoda y efectiva</p>
						<p class="text-sm text-secondary">Cuidado constante durante todo el proceso</p>
					</div>

					<!-- Step 4 -->
					<div class="text-center group step-item" data-step="4">
						<div class="relative mb-6">
							<div class="absolute -top-4 -right-4 w-8 h-8 rounded-full flex items-center justify-center z-10 bg-accent" style="color: var(--color-bg-main);">
								<span class="text-lg font-bold">4</span>
							</div>
							<div class="w-40 h-40 rounded-full mx-auto shadow-gold group-hover:scale-110 transition-all duration-300 overflow-hidden border-gold-light bg-gold-light" style="border-width: 5px;">
								<img
									src="/images/Evaluacion_4.webp"
									alt="Evaluación profesional - paso 4"
									class="w-full h-full object-cover rounded-full"
								>
							</div>
						</div>
						<h3 class="text-xl font-bold mb-3 text-gold-light">Evaluación</h3>
						<p class="text-primary mb-2 font-semibold">Evaluación y análisis detallado para obtener los mejores resultados</p>
						<p class="text-sm text-secondary">Seguimiento para optimizar resultados</p>
					</div>
				</div>
			</div>

			<!-- Call to Action -->
			<div class="text-center mt-24">
				<p class="text-lg text-secondary mb-8">Más que un tratamiento, ofrecemos una <span class="text-gold-light font-semibold">experiencia integral</span> que equilibra cuerpo, piel y mente.</p>
				<a
					href="/servicios"
					class="bg-luxury px-8 py-4 rounded-full font-semibold text-base inline-flex items-center hover:opacity-90 transition-opacity"
					style="color: var(--color-bg-main);"
				>
					Nuestros Servicios
				</a>
			</div>
		</div>
	</section>

	<!-- Testimonials Section -->
	<section id="testimonios" class="pt-12 pb-20 bg-secondary">
		<div class="section-padding">
			<div class="text-center mb-16">
				<h2 class="text-4xl md:text-5xl font-bold text-primary mb-6" >
					Lo que dicen nuestros clientes
				</h2>
				<p class="text-xl text-secondary max-w-3xl mx-auto">
					La satisfacción de nuestros clientes es nuestro mayor logro.
					<span class="text-gold-light font-semibold">Descubre las experiencias reales</span> de quienes han confiado en ARspa.
				</p>
			</div>

			<!-- Testimonials Carousel -->
			<div class="carousel-container relative max-w-6xl mx-auto">
				<div class="carousel-wrapper overflow-hidden">
					<div id="testimonials-carousel" class="carousel-track flex transition-transform duration-500 ease-in-out">
						<!-- Testimonial 1 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">MC</div>
									<div>
										<h4>María Camila R...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"El masaje con piedras volcánicas fue exactamente lo que mi piel necesitaba. Los resultados fueron visibles desde la primera sesión y mi piel se ve más radiante y suave."</p>
								<span class="service-tag">Relajantes</span>
							</div>
						</div>

						<!-- Testimonial 2 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">AG</div>
									<div>
										<h4>Andrés G...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"La sueroterapia fue exactamente lo que mi cuerpo necesitaba. Los resultados fueron visibles desde la primera sesión y me siento con mucha más energía."</p>
								<span class="service-tag">Sueroterapia</span>
							</div>
						</div>

						<!-- Testimonial 3 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">LM</div>
									<div>
										<h4>Lucía M...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"El facial de hidratación profunda fue exactamente lo que mi piel necesitaba. Los resultados fueron visibles desde la primera sesión y ahora mi piel se siente increíblemente hidratada."</p>
								<span class="service-tag">Faciales</span>
							</div>
						</div>

						<!-- Testimonial 4 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">CF</div>
									<div>
										<h4>Carlos F...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"Los masajes reductores fueron exactamente lo que mi cuerpo necesitaba. Los resultados fueron visibles desde la primera sesión y he notado una reducción significativa."</p>
								<span class="service-tag">Corporales</span>
							</div>
						</div>

						<!-- Testimonial 5 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">VL</div>
									<div>
										<h4>Valentina L...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"El baño de novia fue exactamente lo que mi piel necesitaba. Los resultados fueron visibles desde la primera sesión y me sentí como una princesa en mi día especial."</p>
								<span class="service-tag">Especiales</span>
							</div>
						</div>

						<!-- Testimonial 6 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">JM</div>
									<div>
										<h4>Julián M...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"El drenaje linfático fue exactamente lo que mi cuerpo necesitaba. Los resultados fueron visibles desde la primera sesión y me ayudó con la circulación."</p>
								<span class="service-tag">Drenaje Linfático</span>
							</div>
						</div>

						<!-- Testimonial 7 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">SP</div>
									<div>
										<h4>Sofía P...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"La depilación con cera fue exactamente lo que mi piel necesitaba. Los resultados fueron visibles desde la primera sesión y mi piel quedó suave por mucho tiempo."</p>
								<span class="service-tag">Depilación</span>
							</div>
						</div>

						<!-- Testimonial 8 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">DR</div>
									<div>
										<h4>Diego R...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"Los masajes post quirúrgicos fueron exactamente lo que mi cuerpo necesitaba. Los resultados fueron visibles desde la primera sesión y aceleraron mi recuperación."</p>
								<span class="service-tag">Terapéuticos</span>
							</div>
						</div>

						<!-- Testimonial 9 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">CG</div>
									<div>
										<h4>Carolina G...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"El plasma rico en plaquetas fue exactamente lo que mi piel necesitaba. Los resultados fueron visibles desde la primera sesión y mi piel se ve más joven."</p>
								<span class="service-tag">Estética</span>
							</div>
						</div>

						<!-- Testimonial 10 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">MH</div>
									<div>
										<h4>Mateo H...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"Los masajes anticeluíticos fueron exactamente lo que mi cuerpo necesitaba. Los resultados fueron visibles desde la primera sesión y mi piel se ve más firme."</p>
								<span class="service-tag">Reductores</span>
							</div>
						</div>

						<!-- Testimonial 11 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">IA</div>
									<div>
										<h4>Isabella A...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"La limpieza facial profunda fue exactamente lo que mi piel necesitaba. Los resultados fueron visibles desde la primera sesión y mi piel se ve más luminosa."</p>
								<span class="service-tag">Limpieza</span>
							</div>
						</div>

						<!-- Testimonial 12 -->
						<div class="testimonial-card">
							<div class="testimonial-content">
								<div class="testimonial-header">
									<div class="avatar">SC</div>
									<div>
										<h4>Sebastián C...</h4>
										<div class="stars">★★★★★</div>
									</div>
								</div>
								<p>"El masaje de relajación fue exactamente lo que mi cuerpo necesitaba. Los resultados fueron visibles desde la primera sesión y me sentí completamente renovado."</p>
								<span class="service-tag">Relajantes</span>
							</div>
						</div>
					</div>
				</div>

				<!-- Navigation Arrows -->
				<button id="prev-btn" class="nav-btn prev-btn">
					<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
					</svg>
				</button>
				<button id="next-btn" class="nav-btn next-btn">
					<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</button>

				<!-- Dots Indicator -->
				<div id="dots-container" class="dots-container">
					<!-- Dots will be generated by JavaScript -->
				</div>
			</div>
		</div>
	</section>

	<!-- Scripts -->
	<script>
		// WhatsApp Form Handler
		document.addEventListener('DOMContentLoaded', function() {
			const form = document.getElementById('appointment-form');
			if (form) {
				form.addEventListener('submit', function(e) {
					e.preventDefault();

					const nombre = (document.getElementById('nombre') as HTMLInputElement)?.value || '';
					const telefono = (document.getElementById('telefono') as HTMLInputElement)?.value || '';
					const servicio = (document.getElementById('servicio') as HTMLSelectElement)?.value || '';
					const fecha = (document.getElementById('fecha') as HTMLInputElement)?.value || '';
					const modalidad = (document.getElementById('modalidad') as HTMLSelectElement)?.value || '';
					const mensaje = (document.getElementById('mensaje') as HTMLTextAreaElement)?.value || '';

					// Construct WhatsApp message
					let whatsappMessage = `¡Hola! Me interesa agendar una cita en ARspa.\n\n`;
					whatsappMessage += `👤 *Nombre:* ${nombre}\n`;
					whatsappMessage += `📱 *Teléfono:* ${telefono}\n`;
					whatsappMessage += `✨ *Servicio:* ${getServiceName(servicio)}\n`;
					whatsappMessage += `📅 *Fecha preferida:* ${fecha}\n`;
					whatsappMessage += `📍 *Modalidad:* ${modalidad === 'spa' ? 'En el Spa' : 'A Domicilio'}\n`;

					if (mensaje.trim()) {
						whatsappMessage += `\n📝 *Mensaje adicional:*\n${mensaje}`;
					}

					// Open WhatsApp with the message
					const whatsappUrl = `https://wa.me/573013545997?text=${encodeURIComponent(whatsappMessage)}`;
					window.open(whatsappUrl, '_blank');
				});
			}

			function getServiceName(serviceValue: string): string {
				const services = {
					'masajes': 'Masajes de Relajación',
					'corporales': 'Tratamientos Corporales',
					'faciales': 'Faciales',
					'sueroterapia': 'Sueroterapia',
					'dias-especiales': 'Días Especiales'
				};
				return services[serviceValue as keyof typeof services] || serviceValue;
			}

			// Set minimum date to today
			const dateInput = document.getElementById('fecha');
			if (dateInput) {
				const today = new Date().toISOString().split('T')[0];
				dateInput.setAttribute('min', today);
			}

			// How It Works Steps Progressive Animation
			const observerOptions = {
				threshold: 0.2,
				rootMargin: '0px 0px -50px 0px'
			};

			const stepObserver = new IntersectionObserver((entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						startProgressiveAnimation();
						stepObserver.unobserve(entry.target);
					}
				});
			}, observerOptions);

			function startProgressiveAnimation() {
				const allSteps = document.querySelectorAll('.step-item');

				// Secuencia de animación simplificada - solo aparición de pasos
				// 1. Mostrar Valoración (paso 1)
				setTimeout(() => {
					allSteps[0]?.classList.add('visible');
				}, 200);

				// 2. Mostrar Tratamiento (paso 2)
				setTimeout(() => {
					allSteps[1]?.classList.add('visible');
				}, 600);

				// 3. Mostrar Acompañamiento (paso 3)
				setTimeout(() => {
					allSteps[2]?.classList.add('visible');
				}, 1000);

				// 4. Mostrar Evaluación (paso 4)
				setTimeout(() => {
					allSteps[3]?.classList.add('visible');
				}, 1400);
			}

			const firstRow = document.querySelector('.how-it-works-row-1');
			if (firstRow) {
				stepObserver.observe(firstRow);
			}

			// Simple Testimonials Carousel
			const track = document.getElementById('testimonials-carousel');
			const prevBtn = document.getElementById('prev-btn');
			const nextBtn = document.getElementById('next-btn');
			const dotsContainer = document.getElementById('dots-container');
			const cards = document.querySelectorAll('.testimonial-card');

			if (track && prevBtn && nextBtn && dotsContainer && cards.length > 0) {
				let currentSlide = 0;
				let autoplayTimer: number | undefined;

				// Get items per view based on screen width
				function getItemsPerView() {
					if (window.innerWidth >= 1280) return 4; // Desktop
					if (window.innerWidth >= 768) return 3;  // Tablet
					if (window.innerWidth >= 640) return 2;  // Large mobile
					return 2; // Small mobile - optimizado para mostrar 2 tarjetas
				}

				// Calculate total slides
				function getTotalSlides() {
					const itemsPerView = getItemsPerView();
					return Math.ceil(cards.length / itemsPerView);
				}

				// Create dots
				function createDots() {
					const totalSlides = getTotalSlides();
					dotsContainer.innerHTML = '';

					for (let i = 0; i < totalSlides; i++) {
						const dot = document.createElement('div');
						dot.className = `dot ${i === 0 ? 'active' : ''}`;
						dot.addEventListener('click', () => goToSlide(i));
						dotsContainer.appendChild(dot);
					}
				}

				// Update carousel position
				function updateCarousel() {
					const itemsPerView = getItemsPerView();
					const translateX = -(currentSlide * (100 / itemsPerView));
					track.style.transform = `translateX(${translateX}%)`;

					// Update dots
					const dots = dotsContainer.querySelectorAll('.dot');
					dots.forEach((dot, index) => {
						dot.classList.toggle('active', index === currentSlide);
					});
				}

				// Go to specific slide
				function goToSlide(slideIndex) {
					const totalSlides = getTotalSlides();
					currentSlide = slideIndex;
					updateCarousel();
					resetAutoplay();
				}

				// Next slide
				function nextSlide() {
					const totalSlides = getTotalSlides();
					currentSlide = (currentSlide + 1) % totalSlides;
					updateCarousel();
				}

				// Previous slide
				function prevSlide() {
					const totalSlides = getTotalSlides();
					currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
					updateCarousel();
				}

				// Auto-play functions
				function startAutoplay() {
					autoplayTimer = setInterval(nextSlide, 4000);
				}

				function stopAutoplay() {
					if (autoplayTimer) {
						clearInterval(autoplayTimer);
					}
				}

				function resetAutoplay() {
					stopAutoplay();
					startAutoplay();
				}

				// Event listeners
				nextBtn.addEventListener('click', () => {
					nextSlide();
					resetAutoplay();
				});

				prevBtn.addEventListener('click', () => {
					prevSlide();
					resetAutoplay();
				});

				// Pause on hover
				track.addEventListener('mouseenter', stopAutoplay);
				track.addEventListener('mouseleave', startAutoplay);

				// Touch/Swipe support
				let touchStartX = 0;
				let touchEndX = 0;
				let isSwiping = false;

				track.addEventListener('touchstart', (e) => {
					touchStartX = e.changedTouches[0].screenX;
					isSwiping = true;
					stopAutoplay();
				}, { passive: true });

				track.addEventListener('touchmove', (e) => {
					if (!isSwiping) return;
					// Prevent vertical scroll when swiping horizontally
					const touchCurrentX = e.changedTouches[0].screenX;
					const diffX = Math.abs(touchCurrentX - touchStartX);
					if (diffX > 10) {
						e.preventDefault();
					}
				}, { passive: false });

				track.addEventListener('touchend', (e) => {
					if (!isSwiping) return;
					isSwiping = false;
					touchEndX = e.changedTouches[0].screenX;
					
					const swipeThreshold = 50; // Minimum distance for swipe
					const swipeDistance = touchStartX - touchEndX;
					
					if (Math.abs(swipeDistance) > swipeThreshold) {
						if (swipeDistance > 0) {
							// Swipe left - next slide
							nextSlide();
						} else {
							// Swipe right - previous slide
							prevSlide();
						}
						resetAutoplay();
					} else {
						// Resume autoplay if no significant swipe
						startAutoplay();
					}
				}, { passive: true });

				// Handle resize
				window.addEventListener('resize', () => {
					const newTotalSlides = getTotalSlides();
					currentSlide = Math.min(currentSlide, newTotalSlides - 1);
					createDots();
					updateCarousel();
				});

				// Initialize
				createDots();
				updateCarousel();
				startAutoplay();
			}
		});
	</script>
	
	<!-- Booking Modal Component -->
	<BookingModal />
</Layout>